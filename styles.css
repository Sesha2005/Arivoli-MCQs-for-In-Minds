:root{
  --bg:#f8fafc;
  --card:#ffffff;
  --text:#0b1220;
  --muted:#6b7280;
  --accent:#10b981;
  --accent-700:#059669;
  --danger:#ef4444;
  --warning:#f59e0b;
  --border:#e5e7eb;
  --beginner:#3b82f6;   /* blue */
  --intermediate:#ec4899; /* pink */
  --advanced:#10b981;   /* green */
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background: var(--bg);
  color:var(--text);
  -webkit-tap-highlight-color:transparent;
}
#app{display:flex;flex-direction:column;min-height:100%}
.app-header,.app-footer{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#e2e8f0;border-bottom:1px solid var(--border)}
.app-footer{border-top:1px solid var(--border);border-bottom:none}
.brand{font-weight:800;letter-spacing:.3px;color:#0b1220}
.controls{display:flex;gap:12px;flex-wrap:wrap}
.segmented{display:flex;background:#f3f4f6;border:1px solid var(--border);border-radius:999px;overflow:hidden;box-shadow:0 1px 2px #0000000d}
.segmented-btn{appearance:none;border:none;background:transparent;color:var(--muted);padding:10px 14px;cursor:pointer;font-weight:600}
.segmented-btn.active{background:#ffffff;color:var(--text);box-shadow:0 1px 2px #00000010}
.board{flex:1;display:flex;align-items:center;justify-content:center;padding:0 16px}
.question-card{width:min(1100px,100%);background:var(--card);border:2px solid var(--border);border-radius:20px;padding:18px;box-shadow:0 10px 20px #00000010}
.meta{display:flex;justify-content:space-between;color:var(--muted);font-weight:600}
.question{font-size:28px;line-height:1.2;margin:16px 0 12px}
.options{display:grid;gap:10px;grid-template-columns:1fr;}
.option{border:1px solid var(--border);background:#ffffff;color:var(--text);border-radius:14px;padding:14px;display:flex;gap:10px;align-items:flex-start;justify-content:flex-start;text-align:left;cursor:pointer;touch-action:manipulation}
.options,.option span{ text-align:left }
.option:hover{border-color:#cbd5e1}
.option.correct{border-color:var(--accent);background:#ecfdf5}
.option.wrong{border-color:var(--danger);background:#fee2e2}
.badge{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:999px;background:#f3f4f6;color:var(--muted);font-weight:800}
.actions{display:flex;justify-content:flex-end;margin-top:12px}
.primary{background:var(--accent-700);border:none;color:#ffffff;font-weight:800;padding:12px 16px;border-radius:12px;cursor:pointer;box-shadow:0 6px 12px #05966933;transition:transform .12s ease, box-shadow .12s ease}
.primary:hover{transform:translateY(-1px);box-shadow:0 8px 16px #05966944}
.ghost{background:transparent;border:1px solid var(--border);color:var(--text);padding:10px 12px;border-radius:12px;cursor:pointer}
/* Removed bottom toast in favor of center popup */

@media (min-width:700px){
  .question{font-size:34px}
  .options{grid-template-columns:1fr 1fr}
}

/* Landing */
.landing{width:min(1100px,100%);}
.landing-title{font-size:36px;margin:0 0 16px}
.levels{display:grid;grid-template-columns:1fr;gap:14px}
.level-card{display:flex;flex-direction:column;align-items:flex-start;gap:6px;border:2px solid transparent;border-radius:18px;padding:18px;cursor:pointer;box-shadow:0 6px 14px #00000014;transition:transform .15s ease, outline-color .15s ease}
.level-card[data-start="beginner"]{background:var(--beginner);color:#ffffff}
.level-card[data-start="intermediate"]{background:var(--intermediate);color:#ffffff}
.level-card[data-start="advanced"]{background:var(--advanced);color:#ffffff}
.level-card:focus,.level-card:hover{outline:none;transform:translateY(-2px);filter:brightness(0.95)}
.level-card.selected{outline:4px solid #ffffff; outline-offset:2px; filter:brightness(1)}
.level-title{font-size:22px;font-weight:800}
.level-sub{color:#ffffffcc;font-weight:600}

@media (min-width:800px){
  .levels{grid-template-columns:repeat(3,1fr)}
}

/* Avatars */
.avatars{display:grid;grid-template-columns:repeat(2,1fr);gap:18px;justify-items:center}
.avatar-card{display:flex;flex-direction:column;align-items:center;gap:10px;border:2px solid transparent;border-radius:18px;padding:18px;background:var(--card);cursor:pointer;box-shadow:0 6px 14px #00000014;transition:transform .15s ease}
.avatar-card:hover,.avatar-card:focus{transform:translateY(-2px)}
.avatar-card.selected{outline:4px solid var(--accent);outline-offset:2px}
.avatar-img{width:140px;height:140px;border-radius:999px;object-fit:cover;border:4px solid var(--border);background:#f3f4f6}
.avatar-name{font-weight:800;color:var(--text)}

@media (min-width:800px){
  .avatars{grid-template-columns:repeat(4,1fr)}
}

.avatar-actions{display:flex;justify-content:center;margin-top:16px}

/* Center align avatar title and grid only on avatar page */
#avatar-select .landing-title{text-align:center}
#avatar-select .avatars{grid-template-columns:repeat(2,max-content);justify-content:center;gap:28px}

/* Subject level colors (reuse level-card styles) */
.level-card[data-subject="physics"]{background:#60a5fa;color:#ffffff}
.level-card[data-subject="chemistry"]{background:#f97316;color:#ffffff}
.level-card[data-subject="biology"]{background:#22c55e;color:#ffffff}

/* Quiz UI */
.quiz-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:16px}
.progress-container{flex:1;display:flex;align-items:center;gap:12px}
.progress-bar{flex:1;height:8px;background:#e5e7eb;border-radius:4px;overflow:hidden}
.progress-fill{height:100%;background:var(--accent);border-radius:4px;transition:width 0.3s ease;width:0%}
.progress-text{font-weight:600;color:var(--text);min-width:40px;text-align:right}
.timer-container{display:flex;align-items:center}
.timer-circle{width:64px;height:64px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;position:relative;box-shadow:0 0 0 4px #ffffff, 0 0 0 8px var(--accent);}
.timer-text{color:#ffffff;font-weight:800;font-size:20px}
.timer-circle.warning{background:var(--warning)}
.timer-circle.danger{background:var(--danger)}

/* Confetti / Sparkles */
.confetti-burst{position:fixed;left:0;top:0;width:100vw;height:100vh;pointer-events:none;z-index:9999;overflow:visible}
.sparkle{position:absolute;width:8px;height:8px;border-radius:2px;opacity:.95;animation:burst 1100ms ease-out forwards}
.sparkle:nth-child(4n){border-radius:50%}
.sparkle:nth-child(3n){width:6px;height:6px}
@keyframes burst{
  0%{transform:translate(0,0) scale(1) rotate(0deg);opacity:1}
  100%{transform:translate(var(--tx), var(--ty)) scale(0.9) rotate(720deg);opacity:0}
}

/* Centered celebration message */
.celebrate-message{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%) scale(0.85);
  background:linear-gradient(180deg,#ffffff 0%, #fff7ed 100%);
  border:2px solid #fbbf24;
  padding:20px 26px;border-radius:16px;
  box-shadow:0 30px 80px #00000055, 0 0 0 4px #ffffff;
  font-weight:900;font-size:24px;color:#0b1220;z-index:10001;opacity:0;
  transition:transform .2s ease, opacity .2s ease;
  backdrop-filter:saturate(140%) blur(2px);
  text-shadow:0 2px 0 #ffffff;
}
.celebrate-message.show{opacity:1;transform:translate(-50%,-50%) scale(1)}

/* Screen-dimming overlay to highlight popup */
.celebrate-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.35);backdrop-filter:blur(1px);z-index:10000}

/* Make sparkles extra vibrant */
.sparkle{box-shadow:0 0 0 2px #ffffff22, 0 0 10px #ffffff55;mix-blend-mode:screen;will-change:transform,opacity}
